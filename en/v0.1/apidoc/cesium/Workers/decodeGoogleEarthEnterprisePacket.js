define(["./RuntimeError-06c93819","./defaultValue-0a909f67","./createTaskProcessorWorker"],(function(e,t,n){"use strict";function i(t,n){if(i.passThroughDataForTesting)return n;const s=t.byteLength;if(0===s||s%4!=0)throw new e.RuntimeError("The length of key must be greater than 0 and a multiple of 4.");const l=new DataView(n),c=l.getUint32(0,!0);if(1953029805===c||2917034100===c)return n;const d=new DataView(t);let f=0;const h=n.byteLength,u=h-h%8,w=s;let b,m=8;for(;f<u;)for(m=(m+8)%24,b=m;f<u&&b<w;)l.setUint32(f,l.getUint32(f,!0)^d.getUint32(b,!0),!0),l.setUint32(f+4,l.getUint32(f+4,!0)^d.getUint32(b+4,!0),!0),f+=8,b+=24;if(f<h)for(b>=w&&(m=(m+8)%24,b=m);f<h;)l.setUint8(f,l.getUint8(f)^d.getUint8(b)),f++,b++}function r(e,t){return 0!=(e&t)}i.passThroughDataForTesting=!1;const s=[1,2,4,8];function o(e,t,n,s,l,c){this._bits=e,this.cnodeVersion=t,this.imageryVersion=n,this.terrainVersion=s,this.imageryProvider=l,this.terrainProvider=c,this.ancestorHasTerrain=!1,this.terrainState=void 0}o.clone=function(e,n){return t.defined(n)?(n._bits=e._bits,n.cnodeVersion=e.cnodeVersion,n.imageryVersion=e.imageryVersion,n.terrainVersion=e.terrainVersion,n.imageryProvider=e.imageryProvider,n.terrainProvider=e.terrainProvider):n=new o(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),n.ancestorHasTerrain=e.ancestorHasTerrain,n.terrainState=e.terrainState,n},o.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},o.prototype.hasSubtree=function(){return r(this._bits,16)},o.prototype.hasImagery=function(){return r(this._bits,64)},o.prototype.hasTerrain=function(){return r(this._bits,128)},o.prototype.hasChildren=function(){return r(this._bits,15)},o.prototype.hasChild=function(e){return r(this._bits,s[e])},o.prototype.getChildBitmask=function(){return 15&this._bits};var l={},c={};const d=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());const f=16209,h=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),u=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),w=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),b=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var m={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const _=(e,t,n,s)=>{let l=65535&e|0,c=e>>>16&65535|0,d=0;for(;0!==n;){d=n>2e3?2e3:n,n-=d;do{l=l+t[s++]|0,c=c+l|0}while(--d);l%=65521,c%=65521}return l|c<<16|0},p=(e,t,n,s)=>{const l=d,c=s+n;e^=-1;for(let n=s;n<c;n++)e=e>>>8^l[255&(e^t[n])];return-1^e},y=function(e,t){let n,s,l,c,d,h,u,w,b,m,g,E,x,R,A,T,U,S,Z,D,I,O,B,N;const C=e.state;n=e.next_in,B=e.input,s=n+(e.avail_in-5),l=e.next_out,N=e.output,c=l-(t-e.avail_out),d=l+(e.avail_out-257),h=C.dmax,u=C.wsize,w=C.whave,b=C.wnext,m=C.window,g=C.hold,E=C.bits,x=C.lencode,R=C.distcode,A=(1<<C.lenbits)-1,T=(1<<C.distbits)-1;e:do{E<15&&(g+=B[n++]<<E,E+=8,g+=B[n++]<<E,E+=8),U=x[g&A];t:for(;;){if(S=U>>>24,g>>>=S,E-=S,S=U>>>16&255,0===S)N[l++]=65535&U;else{if(!(16&S)){if(0==(64&S)){U=x[(65535&U)+(g&(1<<S)-1)];continue t}if(32&S){C.mode=16191;break e}e.msg="invalid literal/length code",C.mode=f;break e}Z=65535&U,S&=15,S&&(E<S&&(g+=B[n++]<<E,E+=8),Z+=g&(1<<S)-1,g>>>=S,E-=S),E<15&&(g+=B[n++]<<E,E+=8,g+=B[n++]<<E,E+=8),U=R[g&T];n:for(;;){if(S=U>>>24,g>>>=S,E-=S,S=U>>>16&255,!(16&S)){if(0==(64&S)){U=R[(65535&U)+(g&(1<<S)-1)];continue n}e.msg="invalid distance code",C.mode=f;break e}if(D=65535&U,S&=15,E<S&&(g+=B[n++]<<E,E+=8,E<S&&(g+=B[n++]<<E,E+=8)),D+=g&(1<<S)-1,D>h){e.msg="invalid distance too far back",C.mode=f;break e}if(g>>>=S,E-=S,S=l-c,D>S){if(S=D-S,S>w&&C.sane){e.msg="invalid distance too far back",C.mode=f;break e}if(I=0,O=m,0===b){if(I+=u-S,S<Z){Z-=S;do{N[l++]=m[I++]}while(--S);I=l-D,O=N}}else if(b<S){if(I+=u+b-S,S-=b,S<Z){Z-=S;do{N[l++]=m[I++]}while(--S);if(I=0,b<Z){S=b,Z-=S;do{N[l++]=m[I++]}while(--S);I=l-D,O=N}}}else if(I+=b-S,S<Z){Z-=S;do{N[l++]=m[I++]}while(--S);I=l-D,O=N}for(;Z>2;)N[l++]=O[I++],N[l++]=O[I++],N[l++]=O[I++],Z-=3;Z&&(N[l++]=O[I++],Z>1&&(N[l++]=O[I++]))}else{I=l-D;do{N[l++]=N[I++],N[l++]=N[I++],N[l++]=N[I++],Z-=3}while(Z>2);Z&&(N[l++]=N[I++],Z>1&&(N[l++]=N[I++]))}break}}break}}while(n<s&&l<d);Z=E>>3,n-=Z,E-=Z<<3,g&=(1<<E)-1,e.next_in=n,e.next_out=l,e.avail_in=n<s?s-n+5:5-(n-s),e.avail_out=l<d?d-l+257:257-(l-d),C.hold=g,C.bits=E},v=(e,t,n,s,l,c,d,f)=>{const m=f.bits;let g,E,x,R,A,T,U=0,S=0,Z=0,D=0,I=0,O=0,B=0,N=0,C=0,M=0,L=null;const F=new Uint16Array(16),P=new Uint16Array(16);let z,V,X,q=null;for(U=0;U<=15;U++)F[U]=0;for(S=0;S<s;S++)F[t[n+S]]++;for(I=m,D=15;D>=1&&0===F[D];D--);if(I>D&&(I=D),0===D)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(Z=1;Z<D&&0===F[Z];Z++);for(I<Z&&(I=Z),N=1,U=1;U<=15;U++)if(N<<=1,N-=F[U],N<0)return-1;if(N>0&&(0===e||1!==D))return-1;for(P[1]=0,U=1;U<15;U++)P[U+1]=P[U]+F[U];for(S=0;S<s;S++)0!==t[n+S]&&(d[P[t[n+S]]++]=S);if(0===e?(L=q=d,T=20):1===e?(L=h,q=u,T=257):(L=w,q=b,T=0),M=0,S=0,U=Z,A=c,O=I,B=0,x=-1,C=1<<I,R=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){z=U-B,d[S]+1<T?(V=0,X=d[S]):d[S]>=T?(V=q[d[S]-T],X=L[d[S]-T]):(V=96,X=0),g=1<<U-B,E=1<<O,Z=E;do{E-=g,l[A+(M>>B)+E]=z<<24|V<<16|X|0}while(0!==E);for(g=1<<U-1;M&g;)g>>=1;if(0!==g?(M&=g-1,M+=g):M=0,S++,0==--F[U]){if(U===D)break;U=t[n+d[S]]}if(U>I&&(M&R)!==x){for(0===B&&(B=I),A+=Z,O=U-B,N=1<<O;O+B<D&&(N-=F[O+B],!(N<=0));)O++,N<<=1;if(C+=1<<O,1===e&&C>852||2===e&&C>592)return 1;x=M&R,l[x]=I<<24|O<<16|A-c|0}}return 0!==M&&(l[A+M]=U-B<<24|64<<16|0),f.bits=I,0},{Z_FINISH:g,Z_BLOCK:E,Z_TREES:x,Z_OK:R,Z_STREAM_END:A,Z_NEED_DICT:T,Z_STREAM_ERROR:U,Z_DATA_ERROR:S,Z_MEM_ERROR:Z,Z_BUF_ERROR:D,Z_DEFLATED:I}=m,O=16180,B=16190,N=16191,C=16192,M=16194,L=16199,F=16200,P=16206,z=16209,H=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function j(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const K=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<O||t.mode>16211?1:0},Y=e=>{if(K(e))return U;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,R},G=e=>{if(K(e))return U;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Y(e)},Q=(e,t)=>{let n;if(K(e))return U;const s=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?U:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=n,s.wbits=t,G(e))},W=(e,t)=>{if(!e)return U;const n=new j;e.state=n,n.strm=e,n.window=null,n.mode=O;const s=Q(e,t);return s!==R&&(e.state=null),s};let V,X,q=!0;const $=e=>{if(q){V=new Int32Array(512),X=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v(1,e.lens,0,288,V,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v(2,e.lens,0,32,X,0,e.work,{bits:5}),q=!1}e.lencode=V,e.lenbits=9,e.distcode=X,e.distbits=5},ee=(e,t,n,s)=>{let l;const c=e.state;return null===c.window&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),s>=c.wsize?(c.window.set(t.subarray(n-c.wsize,n),0),c.wnext=0,c.whave=c.wsize):(l=c.wsize-c.wnext,l>s&&(l=s),c.window.set(t.subarray(n-s,n-s+l),c.wnext),(s-=l)?(c.window.set(t.subarray(n-s,n),0),c.wnext=s,c.whave=c.wsize):(c.wnext+=l,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=l))),0};c.inflateReset=G,c.inflateReset2=Q,c.inflateResetKeep=Y,c.inflateInit=e=>W(e,15),c.inflateInit2=W,c.inflate=(e,t)=>{let n,s,l,c,d,f,h,u,w,b,m,V,X,q,J,te,ie,re,ae,oe,se,le,ce=0;const he=new Uint8Array(4);let ue,we;const be=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(K(e)||!e.output||!e.input&&0!==e.avail_in)return U;n=e.state,n.mode===N&&(n.mode=C),d=e.next_out,l=e.output,h=e.avail_out,c=e.next_in,s=e.input,f=e.avail_in,u=n.hold,w=n.bits,b=f,m=h,le=R;e:for(;;)switch(n.mode){case O:if(0===n.wrap){n.mode=C;break}for(;w<16;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,he[0]=255&u,he[1]=u>>>8&255,n.check=p(n.check,he,2,0),u=0,w=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=z;break}if((15&u)!==I){e.msg="unknown compression method",n.mode=z;break}if(u>>>=4,w-=4,se=8+(15&u),0===n.wbits&&(n.wbits=se),se>15||se>n.wbits){e.msg="invalid window size",n.mode=z;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:N,u=0,w=0;break;case 16181:for(;w<16;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(n.flags=u,(255&n.flags)!==I){e.msg="unknown compression method",n.mode=z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=z;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(he[0]=255&u,he[1]=u>>>8&255,n.check=p(n.check,he,2,0)),u=0,w=0,n.mode=16182;case 16182:for(;w<32;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(he[0]=255&u,he[1]=u>>>8&255,he[2]=u>>>16&255,he[3]=u>>>24&255,n.check=p(n.check,he,4,0)),u=0,w=0,n.mode=16183;case 16183:for(;w<16;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(he[0]=255&u,he[1]=u>>>8&255,n.check=p(n.check,he,2,0)),u=0,w=0,n.mode=16184;case 16184:if(1024&n.flags){for(;w<16;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(he[0]=255&u,he[1]=u>>>8&255,n.check=p(n.check,he,2,0)),u=0,w=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(V=n.length,V>f&&(V=f),V&&(n.head&&(se=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(s.subarray(c,c+V),se)),512&n.flags&&4&n.wrap&&(n.check=p(n.check,s,V,c)),f-=V,c+=V,n.length-=V),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===f)break e;V=0;do{se=s[c+V++],n.head&&se&&n.length<65536&&(n.head.name+=String.fromCharCode(se))}while(se&&V<f);if(512&n.flags&&4&n.wrap&&(n.check=p(n.check,s,V,c)),f-=V,c+=V,se)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===f)break e;V=0;do{se=s[c+V++],n.head&&se&&n.length<65536&&(n.head.comment+=String.fromCharCode(se))}while(se&&V<f);if(512&n.flags&&4&n.wrap&&(n.check=p(n.check,s,V,c)),f-=V,c+=V,se)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;w<16;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=z;break}u=0,w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=N;break;case 16189:for(;w<32;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}e.adler=n.check=H(u),u=0,w=0,n.mode=B;case B:if(0===n.havedict)return e.next_out=d,e.avail_out=h,e.next_in=c,e.avail_in=f,n.hold=u,n.bits=w,T;e.adler=n.check=1,n.mode=N;case N:if(t===E||t===x)break e;case C:if(n.last){u>>>=7&w,w-=7&w,n.mode=P;break}for(;w<3;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}switch(n.last=1&u,u>>>=1,w-=1,3&u){case 0:n.mode=16193;break;case 1:if($(n),n.mode=L,t===x){u>>>=2,w-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=z}u>>>=2,w-=2;break;case 16193:for(u>>>=7&w,w-=7&w;w<32;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=z;break}if(n.length=65535&u,u=0,w=0,n.mode=M,t===x)break e;case M:n.mode=16195;case 16195:if(V=n.length,V){if(V>f&&(V=f),V>h&&(V=h),0===V)break e;l.set(s.subarray(c,c+V),d),f-=V,c+=V,h-=V,d+=V,n.length-=V;break}n.mode=N;break;case 16196:for(;w<14;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(n.nlen=257+(31&u),u>>>=5,w-=5,n.ndist=1+(31&u),u>>>=5,w-=5,n.ncode=4+(15&u),u>>>=4,w-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=z;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;w<3;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.lens[be[n.have++]]=7&u,u>>>=3,w-=3}for(;n.have<19;)n.lens[be[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ue={bits:n.lenbits},le=v(0,n.lens,0,19,n.lencode,0,n.work,ue),n.lenbits=ue.bits,le){e.msg="invalid code lengths set",n.mode=z;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;ce=n.lencode[u&(1<<n.lenbits)-1],J=ce>>>24,te=ce>>>16&255,ie=65535&ce,!(J<=w);){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(ie<16)u>>>=J,w-=J,n.lens[n.have++]=ie;else{if(16===ie){for(we=J+2;w<we;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(u>>>=J,w-=J,0===n.have){e.msg="invalid bit length repeat",n.mode=z;break}se=n.lens[n.have-1],V=3+(3&u),u>>>=2,w-=2}else if(17===ie){for(we=J+3;w<we;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}u>>>=J,w-=J,se=0,V=3+(7&u),u>>>=3,w-=3}else{for(we=J+7;w<we;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}u>>>=J,w-=J,se=0,V=11+(127&u),u>>>=7,w-=7}if(n.have+V>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=z;break}for(;V--;)n.lens[n.have++]=se}}if(n.mode===z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=z;break}if(n.lenbits=9,ue={bits:n.lenbits},le=v(1,n.lens,0,n.nlen,n.lencode,0,n.work,ue),n.lenbits=ue.bits,le){e.msg="invalid literal/lengths set",n.mode=z;break}if(n.distbits=6,n.distcode=n.distdyn,ue={bits:n.distbits},le=v(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ue),n.distbits=ue.bits,le){e.msg="invalid distances set",n.mode=z;break}if(n.mode=L,t===x)break e;case L:n.mode=F;case F:if(f>=6&&h>=258){e.next_out=d,e.avail_out=h,e.next_in=c,e.avail_in=f,n.hold=u,n.bits=w,y(e,m),d=e.next_out,l=e.output,h=e.avail_out,c=e.next_in,s=e.input,f=e.avail_in,u=n.hold,w=n.bits,n.mode===N&&(n.back=-1);break}for(n.back=0;ce=n.lencode[u&(1<<n.lenbits)-1],J=ce>>>24,te=ce>>>16&255,ie=65535&ce,!(J<=w);){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(te&&0==(240&te)){for(re=J,ae=te,oe=ie;ce=n.lencode[oe+((u&(1<<re+ae)-1)>>re)],J=ce>>>24,te=ce>>>16&255,ie=65535&ce,!(re+J<=w);){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}u>>>=re,w-=re,n.back+=re}if(u>>>=J,w-=J,n.back+=J,n.length=ie,0===te){n.mode=16205;break}if(32&te){n.back=-1,n.mode=N;break}if(64&te){e.msg="invalid literal/length code",n.mode=z;break}n.extra=15&te,n.mode=16201;case 16201:if(n.extra){for(we=n.extra;w<we;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;ce=n.distcode[u&(1<<n.distbits)-1],J=ce>>>24,te=ce>>>16&255,ie=65535&ce,!(J<=w);){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(0==(240&te)){for(re=J,ae=te,oe=ie;ce=n.distcode[oe+((u&(1<<re+ae)-1)>>re)],J=ce>>>24,te=ce>>>16&255,ie=65535&ce,!(re+J<=w);){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}u>>>=re,w-=re,n.back+=re}if(u>>>=J,w-=J,n.back+=J,64&te){e.msg="invalid distance code",n.mode=z;break}n.offset=ie,n.extra=15&te,n.mode=16203;case 16203:if(n.extra){for(we=n.extra;w<we;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=z;break}n.mode=16204;case 16204:if(0===h)break e;if(V=m-h,n.offset>V){if(V=n.offset-V,V>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=z;break}V>n.wnext?(V-=n.wnext,X=n.wsize-V):X=n.wnext-V,V>n.length&&(V=n.length),q=n.window}else q=l,X=d-n.offset,V=n.length;V>h&&(V=h),h-=V,n.length-=V;do{l[d++]=q[X++]}while(--V);0===n.length&&(n.mode=F);break;case 16205:if(0===h)break e;l[d++]=n.length,h--,n.mode=F;break;case P:if(n.wrap){for(;w<32;){if(0===f)break e;f--,u|=s[c++]<<w,w+=8}if(m-=h,e.total_out+=m,n.total+=m,4&n.wrap&&m&&(e.adler=n.check=n.flags?p(n.check,l,m,d-m):_(n.check,l,m,d-m)),m=h,4&n.wrap&&(n.flags?u:H(u))!==n.check){e.msg="incorrect data check",n.mode=z;break}u=0,w=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;w<32;){if(0===f)break e;f--,u+=s[c++]<<w,w+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=z;break}u=0,w=0}n.mode=16208;case 16208:le=A;break e;case z:le=S;break e;case 16210:return Z;default:return U}return e.next_out=d,e.avail_out=h,e.next_in=c,e.avail_in=f,n.hold=u,n.bits=w,(n.wsize||m!==e.avail_out&&n.mode<z&&(n.mode<P||t!==g))&&ee(e,e.output,e.next_out,m-e.avail_out),b-=e.avail_in,m-=e.avail_out,e.total_in+=b,e.total_out+=m,n.total+=m,4&n.wrap&&m&&(e.adler=n.check=n.flags?p(n.check,l,m,e.next_out-m):_(n.check,l,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===N?128:0)+(n.mode===L||n.mode===M?256:0),(0===b&&0===m||t===g)&&le===R&&(le=D),le},c.inflateEnd=e=>{if(K(e))return U;let t=e.state;return t.window&&(t.window=null),e.state=null,R},c.inflateGetHeader=(e,t)=>{if(K(e))return U;const n=e.state;return 0==(2&n.wrap)?U:(n.head=t,t.done=!1,R)},c.inflateSetDictionary=(e,t)=>{const n=t.length;let s,l,c;return K(e)?U:(s=e.state,0!==s.wrap&&s.mode!==B?U:s.mode===B&&(l=1,l=_(l,t,n,0),l!==s.check)?S:(c=ee(e,t,n,n),c?(s.mode=16210,Z):(s.havedict=1,R)))},c.inflateInfo="pako inflate (from Nodeca project)";var J={};const ne=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);J.assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)ne(n,t)&&(e[t]=n[t])}}return e},J.flattenChunks=e=>{let t=0;for(let n=0,s=e.length;n<s;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,s=0,l=e.length;t<l;t++){let l=e[t];n.set(l,s),s+=l.length}return n};var te={};let ie=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ie=!1}const re=new Uint8Array(256);for(let e=0;e<256;e++)re[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;re[254]=re[254]=1,te.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,s,l,c,d=e.length,f=0;for(l=0;l<d;l++)n=e.charCodeAt(l),55296==(64512&n)&&l+1<d&&(s=e.charCodeAt(l+1),56320==(64512&s)&&(n=65536+(n-55296<<10)+(s-56320),l++)),f+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(f),c=0,l=0;c<f;l++)n=e.charCodeAt(l),55296==(64512&n)&&l+1<d&&(s=e.charCodeAt(l+1),56320==(64512&s)&&(n=65536+(n-55296<<10)+(s-56320),l++)),n<128?t[c++]=n:n<2048?(t[c++]=192|n>>>6,t[c++]=128|63&n):n<65536?(t[c++]=224|n>>>12,t[c++]=128|n>>>6&63,t[c++]=128|63&n):(t[c++]=240|n>>>18,t[c++]=128|n>>>12&63,t[c++]=128|n>>>6&63,t[c++]=128|63&n);return t},te.buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let s,l;const c=new Array(2*n);for(l=0,s=0;s<n;){let t=e[s++];if(t<128){c[l++]=t;continue}let d=re[t];if(d>4)c[l++]=65533,s+=d-1;else{for(t&=2===d?31:3===d?15:7;d>1&&s<n;)t=t<<6|63&e[s++],d--;d>1?c[l++]=65533:t<65536?c[l++]=t:(t-=65536,c[l++]=55296|t>>10&1023,c[l++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&ie)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n})(c,l)},te.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+re[e[n]]>t?n:t};const ae=c,oe=J,se=te,le={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},de=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},fe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ce=Object.prototype.toString,{Z_NO_FLUSH:he,Z_FINISH:ue,Z_OK:we,Z_STREAM_END:be,Z_NEED_DICT:me,Z_STREAM_ERROR:ge,Z_DATA_ERROR:ke,Z_MEM_ERROR:_e}=m;function ye(e){this.options=oe.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new de,this.strm.avail_out=0;let n=ae.inflateInit2(this.strm,t.windowBits);if(n!==we)throw new Error(le[n]);if(this.header=new fe,ae.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=se.string2buf(t.dictionary):"[object ArrayBuffer]"===ce.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ae.inflateSetDictionary(this.strm,t.dictionary),n!==we)))throw new Error(le[n])}function ve(e,t){const n=new ye(t);if(n.push(e),n.err)throw n.msg||le[n.err];return n.result}ye.prototype.push=function(e,t){const n=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let c,d,f;if(this.ended)return!1;for(d=t===~~t?t:!0===t?ue:he,"[object ArrayBuffer]"===ce.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),c=ae.inflate(n,d),c===me&&l&&(c=ae.inflateSetDictionary(n,l),c===we?c=ae.inflate(n,d):c===ke&&(c=me));n.avail_in>0&&c===be&&n.state.wrap>0&&0!==e[n.next_in];)ae.inflateReset(n),c=ae.inflate(n,d);switch(c){case ge:case ke:case me:case _e:return this.onEnd(c),this.ended=!0,!1}if(f=n.avail_out,n.next_out&&(0===n.avail_out||c===be))if("string"===this.options.to){let e=se.utf8border(n.output,n.next_out),t=n.next_out-e,l=se.buf2string(n.output,e);n.next_out=t,n.avail_out=s-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(l)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(c!==we||0!==f){if(c===be)return c=ae.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ye.prototype.onData=function(e){this.chunks.push(e)},ye.prototype.onEnd=function(e){e===we&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=oe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},l.Inflate=ye,l.inflate=ve,l.inflateRaw=function(e,t){return(t=t||{}).raw=!0,ve(e,t)},l.ungzip=ve,l.constants=m;const pe=Uint16Array.BYTES_PER_ELEMENT,Ee=Int32Array.BYTES_PER_ELEMENT,xe=Uint32Array.BYTES_PER_ELEMENT,Re={METADATA:0,TERRAIN:1,DBROOT:2,fromString:function(e){return"Metadata"===e?Re.METADATA:"Terrain"===e?Re.TERRAIN:"DbRoot"===e?Re.DBROOT:void 0}},Ae=1953029805;return n((function(t,n){const s=Re.fromString(t.type);let c=t.buffer;i(t.key,c);const d=function(t){const n=new DataView(t);let s=0;const c=n.getUint32(s,!0);if(s+=xe,c!==Ae&&2917034100!==c)throw new e.RuntimeError("Invalid magic");const d=n.getUint32(s,c===Ae);s+=xe;const f=new Uint8Array(t,s),h=l.inflate(f);if(h.length!==d)throw new e.RuntimeError("Size of packet doesn't match header");return h}(c);c=d.buffer;const f=d.length;switch(s){case Re.METADATA:return function(t,n,s){const l=new DataView(t);let c=0;const d=l.getUint32(c,!0);if(c+=xe,32301!==d)throw new e.RuntimeError("Invalid magic");const f=l.getUint32(c,!0);if(c+=xe,1!==f)throw new e.RuntimeError("Invalid data type. Must be 1 for QuadTreePacket");const h=l.getUint32(c,!0);if(c+=xe,2!==h)throw new e.RuntimeError("Invalid QuadTreePacket version. Only version 2 is supported.");const u=l.getInt32(c,!0);c+=Ee;const w=l.getInt32(c,!0);if(c+=Ee,32!==w)throw new e.RuntimeError("Invalid instance size.");const b=l.getInt32(c,!0);c+=Ee;const m=l.getInt32(c,!0);c+=Ee;const g=l.getInt32(c,!0);if(c+=Ee,b!==u*w+c)throw new e.RuntimeError("Invalid dataBufferOffset");if(b+m+g!==n)throw new e.RuntimeError("Invalid packet offsets");const E=[];for(let e=0;e<u;++e){const e=l.getUint8(c);++c,++c;const t=l.getUint16(c,!0);c+=pe;const n=l.getUint16(c,!0);c+=pe;const s=l.getUint16(c,!0);c+=pe,c+=pe,c+=pe,c+=Ee,c+=Ee,c+=8;const d=l.getUint8(c++),f=l.getUint8(c++);c+=pe,E.push(new o(e,t,n,s,d,f))}const x=[];let R=0;let A=0;const T=E[R++];return""===s?++A:x[s]=T,function k(e,t,n){let s=!1;if(4===n){if(t.hasSubtree())return;s=!0}for(let l=0;l<4;++l){const c=e+l.toString();if(s)x[c]=null;else if(n<4)if(t.hasChild(l)){if(R===u)return void console.log("Incorrect number of instances");const e=E[R++];x[c]=e,k(c,e,n+1)}else x[c]=null}}(s,T,A),x}(c,f,t.quadKey);case Re.TERRAIN:return function(t,n,s){const l=new DataView(t),a=function(t){for(let s=0;s<4;++s){const s=l.getUint32(t,!0);if(t+=xe,(t+=s)>n)throw new e.RuntimeError("Malformed terrain packet found.")}return t};let c=0;const d=[];for(;d.length<5;){const e=c;c=a(c);const n=t.slice(e,c);s.push(n),d.push(n)}return d}(c,f,n);case Re.DBROOT:return n.push(c),{buffer:c}}}))}));