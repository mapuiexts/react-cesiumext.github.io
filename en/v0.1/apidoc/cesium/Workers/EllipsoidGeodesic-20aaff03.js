define(["exports","./Matrix3-b2351961","./defaultValue-f6d5e6da","./Math-355606c6"],(function(t,a,i,n){"use strict";function e(t,a,i,n,s,o,d){const c=function(t,a){return t*a*(4+t*(4-3*a))/16}(t,i);return(1-c)*t*a*(n+c*s*(d+c*o*(2*d*d-1)))}const s=new a.Cartesian3,o=new a.Cartesian3;function r(t,i,d,c){a.Cartesian3.normalize(c.cartographicToCartesian(i,o),s),a.Cartesian3.normalize(c.cartographicToCartesian(d,o),o),function(t,a,i,s,o,d,c){const u=(a-i)/a,l=d-s,M=Math.atan((1-u)*Math.tan(o)),g=Math.atan((1-u)*Math.tan(c)),_=Math.cos(M),p=Math.sin(M),f=Math.cos(g),m=Math.sin(g),H=_*f,C=_*m,v=p*m,O=p*f;let S,q,U,A,b,w=l,R=n.CesiumMath.TWO_PI,x=Math.cos(w),y=Math.sin(w);do{x=Math.cos(w),y=Math.sin(w);const t=C-O*x;let a;U=Math.sqrt(f*f*y*y+t*t),q=v+H*x,S=Math.atan2(U,q),0===U?(a=0,A=1):(a=H*y/U,A=1-a*a),R=w,b=q-2*v/A,isFinite(b)||(b=0),w=l+e(u,a,A,S,U,q,b)}while(Math.abs(w-R)>n.CesiumMath.EPSILON12);const E=A*(a*a-i*i)/(i*i),P=E*(256+E*(E*(74-47*E)-128))/1024,D=b*b,T=i*(1+E*(4096+E*(E*(320-175*E)-768))/16384)*(S-P*U*(b+P*(q*(2*D-1)-P*b*(4*U*U-3)*(4*D-3)/6)/4)),z=Math.atan2(f*y,C-O*x),F=Math.atan2(_*y,C*x-O);t._distance=T,t._startHeading=z,t._endHeading=F,t._uSquared=E}(t,c.maximumRadius,c.minimumRadius,i.longitude,i.latitude,d.longitude,d.latitude),t._start=a.Cartographic.clone(i,t._start),t._end=a.Cartographic.clone(d,t._end),t._start.height=0,t._end.height=0,function(t){const a=t._uSquared,i=t._ellipsoid.maximumRadius,n=t._ellipsoid.minimumRadius,s=(i-n)/i,o=Math.cos(t._startHeading),d=Math.sin(t._startHeading),c=(1-s)*Math.tan(t._start.latitude),u=1/Math.sqrt(1+c*c),l=u*c,M=Math.atan2(c,o),g=u*d,_=g*g,p=1-_,f=Math.sqrt(p),m=a/4,H=m*m,C=H*m,v=H*H,O=1+m-3*H/4+5*C/4-175*v/64,S=1-m+15*H/8-35*C/8,q=1-3*m+35*H/4,U=1-5*m,A=O*M-S*Math.sin(2*M)*m/2-q*Math.sin(4*M)*H/16-U*Math.sin(6*M)*C/48-5*Math.sin(8*M)*v/512,b=t._constants;b.a=i,b.b=n,b.f=s,b.cosineHeading=o,b.sineHeading=d,b.tanU=c,b.cosineU=u,b.sineU=l,b.sigma=M,b.sineAlpha=g,b.sineSquaredAlpha=_,b.cosineSquaredAlpha=p,b.cosineAlpha=f,b.u2Over4=m,b.u4Over16=H,b.u6Over64=C,b.u8Over256=v,b.a0=O,b.a1=S,b.a2=q,b.a3=U,b.distanceRatio=A}(t)}function h(t,n,s){const o=i.defaultValue(s,a.Ellipsoid.WGS84);this._ellipsoid=o,this._start=new a.Cartographic,this._end=new a.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,i.defined(t)&&i.defined(n)&&r(this,t,n,o)}Object.defineProperties(h.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),h.prototype.setEndPoints=function(t,a){r(this,t,a,this._ellipsoid)},h.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},h.prototype.interpolateUsingSurfaceDistance=function(t,n){const s=this._constants,o=s.distanceRatio+t/s.b,d=Math.cos(2*o),c=Math.cos(4*o),u=Math.cos(6*o),l=Math.sin(2*o),M=Math.sin(4*o),g=Math.sin(6*o),_=Math.sin(8*o),p=o*o,f=o*p,m=s.u8Over256,H=s.u2Over4,C=s.u6Over64,v=s.u4Over16;let O=2*f*m*d/3+o*(1-H+7*v/4-15*C/4+579*m/64-(v-15*C/4+187*m/16)*d-(5*C/4-115*m/16)*c-29*m*u/16)+(H/2-v+71*C/32-85*m/16)*l+(5*v/16-5*C/4+383*m/96)*M-p*((C-11*m/2)*l+5*m*M/2)+(29*C/96-29*m/16)*g+539*m*_/1536;const S=Math.asin(Math.sin(O)*s.cosineAlpha),q=Math.atan(s.a/s.b*Math.tan(S));O-=s.sigma;const U=Math.cos(2*s.sigma+O),A=Math.sin(O),b=Math.cos(O),w=s.cosineU*b,R=s.sineU*A,x=Math.atan2(A*s.sineHeading,w-R*s.cosineHeading)-e(s.f,s.sineAlpha,s.cosineSquaredAlpha,O,A,b,U);return i.defined(n)?(n.longitude=this._start.longitude+x,n.latitude=q,n.height=0,n):new a.Cartographic(this._start.longitude+x,q,0)},t.EllipsoidGeodesic=h}));